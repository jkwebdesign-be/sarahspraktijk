---
import { ViewTransitions } from 'astro:transitions';
import '../styles/tokens.css';
import '../styles/global.css';
import Header from '../components/header.astro';
import Footer from '../components/footer.astro';

interface Props {
	title?: string;
	description?: string;
	ogImage?: string;
	transparentHeader?: boolean;
	author?: string;
	robotsIndex?: boolean;
}

const {
	title = "Sarah's Praktijk - Holistische Therapie in Keerbergen",
	description = 'Professionele systemische therapie en coaching in Keerbergen. Begeleiding bij relaties, persoonlijke groei en levenskwesties.',
	ogImage = '/og-image.jpg',
	transparentHeader = true,
	author = "Sarah's Praktijk",
	robotsIndex = true
} = Astro.props;

const canonicalURL = Astro.site ? new URL(Astro.url.pathname, Astro.site) : null;
const isHomepage = Astro.url.pathname === '/';

const navItems = [
	{ href: '/', label: 'Home' },
	{ href: '/therapie', label: 'Therapie' },
	{ href: '/aanbod', label: 'Aanbod' },
	{ href: '/over', label: 'Over Sarah' },
	{ href: '/contact', label: 'Contact' },
];

const footerNavLinks = [
	{ href: '/', label: 'Home' },
	{ href: '/therapie', label: 'Therapie' },
	{ href: '/aanbod', label: 'Aanbod' },
	{ href: '/tarieven', label: 'Tarieven' },
	{ href: '/over', label: 'Over Sarah' },
	{ href: '/contact', label: 'Contact' },
];

const socialLinks = [
	{ href: 'https://www.facebook.com/sarahscoachingpraktijk.be/', icon: '/icon/facebook.svg', label: 'facebook' },
	{ href: 'https://www.instagram.com/sarahscoachingpraktijk/', icon: '/icon/instagram.svg', label: 'instagram' },
];

// Structured Data - Organization Schema
const organizationSchema = {
	"@context": "https://schema.org",
	"@type": "MedicalBusiness",
	"name": "Sarah's Praktijk",
	"description": description,
	"url": Astro.site?.toString(),
	"logo": new URL('/logo/logo_header.png', Astro.url),
	"image": new URL(ogImage, Astro.url),
	"address": {
		"@type": "PostalAddress",
		"streetAddress": "Bollostraat 104",
		"addressLocality": "Keerbergen",
		"postalCode": "3140",
		"addressCountry": "BE"
	},
	"telephone": "+32468489373",
	"priceRange": "$$",
	"openingHours": "Mo-Fr 09:00-18:00",
	"sameAs": [
		"https://www.facebook.com/sarahscoachingpraktijk.be/",
		"https://www.instagram.com/sarahscoachingpraktijk/"
	]
};

// Structured Data - LocalBusiness Schema
const localBusinessSchema = {
	"@context": "https://schema.org",
	"@type": "LocalBusiness",
	"name": "Sarah's Praktijk",
	"description": description,
	"url": Astro.site?.toString(),
	"telephone": "+32468489373",
	"address": {
		"@type": "PostalAddress",
		"streetAddress": "Bollostraat 104",
		"addressLocality": "Keerbergen",
		"postalCode": "3140",
		"addressCountry": "BE"
	},
	"geo": {
		"@type": "GeoCoordinates",
		"latitude": "51.0019",
		"longitude": "4.6841"
	},
	"openingHoursSpecification": [
		{
			"@type": "OpeningHoursSpecification",
			"dayOfWeek": ["Monday", "Tuesday", "Thursday", "Friday"],
			"opens": "09:00",
			"closes": "18:00"
		}
	]
};

// Structured Data - WebSite Schema (for homepage)
const websiteSchema = {
	"@context": "https://schema.org",
	"@type": "WebSite",
	"name": "Sarah's Praktijk",
	"url": Astro.site?.toString(),
	"description": description,
	"inLanguage": "nl-BE"
};
---
<!doctype html>
<html lang="nl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- SEO Meta Tags -->
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="author" content={author} />
		<meta name="robots" content={robotsIndex ? "index, follow" : "noindex, nofollow"} />
		<meta name="googlebot" content={robotsIndex ? "index, follow" : "noindex, nofollow"} />
		{canonicalURL && <link rel="canonical" href={canonicalURL} />}
		
		<!-- Language & Regional -->
		<meta name="language" content="Dutch" />
		<meta http-equiv="content-language" content="nl-BE" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:locale" content="nl_BE" />
		{canonicalURL && <meta property="og:url" content={canonicalURL} />}
		<meta property="og:site_name" content="Sarah's Praktijk" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={new URL(ogImage, Astro.url)} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:image:alt" content={title} />
		
		<!-- Twitter / X Card -->
		<meta name="twitter:card" content="summary_large_image" />
		{canonicalURL && <meta name="twitter:url" content={canonicalURL} />}
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={new URL(ogImage, Astro.url)} />
		<meta name="twitter:image:alt" content={title} />
		
		<!-- Additional Meta Tags -->
		<meta name="theme-color" content="#ffffff" />
		<meta name="format-detection" content="telephone=no" />
		
		<!-- Preload fonts (update paths to match your actual font files) -->
		<link rel="preload" href="/fonts/Poppins-Regular.woff2" as="font" type="font/woff2" crossorigin />
		<link rel="preload" href="/fonts/Poppins-Light.woff2" as="font" type="font/woff2" crossorigin />
		<link rel="preload" href="/fonts/magnolia-script.woff2" as="font" type="font/woff2" crossorigin />
		<link rel="preload" href="/fonts/allura.woff2" as="font" type="font/woff2" crossorigin />
		
		<!-- Preload header logo -->
		<link rel="preload" href="/logo/logo_header.png" as="image" />

		<!-- Preload hero image on homepage only -->
		{isHomepage && (
			<link rel="preload" href="/images/hero.webp" as="image" />
		)}
		
		<!-- Structured Data / JSON-LD -->
		<script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
		<script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
		{isHomepage && (
			<script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
		)}
		
		<!-- View Transitions -->
		<ViewTransitions fallback="none" />
	</head>
	<body>
		<Header 
			logoSrc="/logo/logo_header.png"
			logoAlt="Sarahs Praktijk Logo"
			navItems={navItems}
			transparentOnTop={transparentHeader}
		/>
		
		<slot />
		
		<Footer
			logoSrc="/logo/logo_header.png"
			companyName=""
			adres="Bollostraat 104  - 3140 Keerbergen"
			phone="0468 48 93 73"
			navLinks={footerNavLinks}
			socialLinks={socialLinks}
			copyrightText="Â© 2025 Sarah's Praktijk. Gemaakt door <a href='https://www.jkwebdesign.be' target='_blank' rel='noopener noreferrer'>JK Webdesign</a>."
		/>
	</body>
</html>