---
interface Props {
  title: string;
  description?: string;
  ctaText: string;
  ctaLink: string;
  ctaStyle?: 'primary' | 'secondary' | 'accent' | 'outline' | 'purple-filled' | 'green-filled' | 'blue-filled';
  layout?: 'centered' | 'split';
  backgroundColor?: string;
  backgroundImage?: string;
  overlayOpacity?: number;
  padding?: 'small' | 'medium' | 'large';
  textColor?: 'light' | 'dark';
}

const {
  title,
  description,
  ctaText,
  ctaLink,
  ctaStyle = 'primary',
  layout = 'centered',
  backgroundColor = 'transparent',
  backgroundImage,
  overlayOpacity = 0.6,
  padding = 'large',
  textColor = 'dark'
} = Astro.props;

const paddingMap = {
  'small': 'var(--space-12)',
  'medium': 'var(--space-16)',
  'large': 'var(--space-24)',
};
---

<section 
  class={`cta cta--${layout} cta--text-${textColor}`}
  style={`
    background-color: ${backgroundColor};
    ${backgroundImage ? `background-image: url('${backgroundImage}');` : ''}
    ${backgroundImage ? 'background-size: cover; background-position: center;' : ''}
    padding: ${paddingMap[padding]} var(--container-padding);
    position: relative;
  `}
>
  {backgroundImage && (
    <div class="cta__overlay" style={`opacity: ${overlayOpacity};`}></div>
  )}
  
  <div class="cta__container">
    <div class="cta__content">
      <h2 class="cta__title">{title}</h2>
      {description && <p class="cta__description">{description}</p>}
    </div>
    <div class="cta__action">
      <a href={ctaLink} class={`btn btn--${ctaStyle}`}>{ctaText}</a>
    </div>
  </div>
</section>

<style>
  .cta {
    width: 100%;
  }

  .cta__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #000;
    z-index: 0;
  }

  .cta__container {
    max-width: var(--container-max);
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }

  .cta__title {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-regular);
    line-height: var(--line-height-tight);
    margin: 0;
  }

  .cta__description {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-normal);
    margin: var(--space-4) 0 0 0;
  }

  /* Text color variants */
  .cta--text-light .cta__title,
  .cta--text-light .cta__description {
    color: var(--color-text-inverse);
  }

  .cta--text-dark .cta__title,
  .cta--text-dark .cta__description {
    color: var(--color-text);
  }

  /* centered layout */
  .cta--centered .cta__container {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-8);
  }

  .cta--centered .cta__content {
    max-width: 700px;
  }

  /* split layout */
  .cta--split .cta__container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-12);
  }

  .cta--split .cta__content {
    flex: 1;
  }

  .cta--split .cta__action {
    flex-shrink: 0;
  }

  /* responsive */
  @media (max-width: 768px) {
    .cta--split .cta__container {
      flex-direction: column;
      text-align: center;
      gap: var(--space-6);
    }

    .cta__title {
      font-size: var(--font-size-2xl);
    }

    .cta__description {
      font-size: var(--font-size-base);
    }
  }
</style>