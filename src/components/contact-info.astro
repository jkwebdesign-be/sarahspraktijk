---
interface Props {
  title: string;
  phone: string;
  email: string;
  address: string;
  mapImageSrc: string;
  mapLink: string;
  headingLevel?: 'h1' | 'h2';
  backgroundColor?: string;
}

const {
  title,
  phone,
  email,
  address,
  mapImageSrc,
  mapLink,
  headingLevel = 'h1',
  backgroundColor = 'transparent'
} = Astro.props;

const HeadingTag = headingLevel;
---

<section class="contact-info" style={`background-color: ${backgroundColor};`}>
  <div class="contact-info__container">
    <div class="contact-info__header">
      <HeadingTag>{title}</HeadingTag>
      <div class="contact-info__intro">
        <slot name="intro" />
      </div>
    </div>

    <div class="contact-info__pre-content">
      <slot name="before-contact" />
    </div>

    <div class="contact-info__content">
      <div class="contact-info__details">
        <!-- phone -->
        <div class="contact-info__item">
          <div class="contact-info__icon-wrapper">
            <svg class="contact-info__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            <span class="contact-info__label">{phone}</span>
          </div>
          <div class="contact-info__note">
            <slot name="phone-note" />
          </div>
          <div class="contact-info__buttons">
            <a href={`tel:${phone.replace(/\s/g, '')}`} class="btn btn--purple-filled">bel me</a>
            <a href={`https://wa.me/${phone.replace(/\s/g, '').replace(/^0/, '32')}`} class="btn btn--green-filled" target="_blank" rel="noopener noreferrer">stuur via whatsapp</a>
          </div>
        </div>

        <!-- email -->
        <div class="contact-info__item">
          <div class="contact-info__icon-wrapper">
            <svg class="contact-info__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <span class="contact-info__label">{email}</span>
          </div>
          <div class="contact-info__note">
            <slot name="email-note" />
          </div>
          <a href={`mailto:${email}`} class="btn btn--blue-filled">stuur een email</a>
        </div>

        <!-- address -->
        <div class="contact-info__item">
          <div class="contact-info__icon-wrapper">
            <svg class="contact-info__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span class="contact-info__label">praktijkadres</span>
          </div>
          <p class="contact-info__address">{address}</p>
        </div>
      </div>

      <!-- map -->
      <div class="contact-info__map">
        <a href={mapLink} target="_blank" rel="noopener noreferrer" class="contact-info__map-link">
          <img src={mapImageSrc} alt="locatie op kaart" loading="eager"/>
          <div class="contact-info__map-overlay">
            <span class="contact-info__map-text">Open route in Google Maps</span>
          </div>
        </a>
      </div>
    </div>

    <!-- Footer note below both columns -->
    <div class="contact-info__footer-note">
      <slot name="footer-note" />
    </div>
  </div>
</section>

<style>
  .contact-info {
    width: 100%;
    padding: var(--space-24) 0 var(--space-16) 0;
  }

  .contact-info__container {
    max-width: var(--container-max);
    margin: 0 auto;
    padding: 0 var(--container-padding);
  }

  .contact-info__header {
    margin-bottom: var(--space-8);
  }

  .contact-info__header h1 {
    margin-bottom: var(--space-6);
  }

  .contact-info__intro {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-normal);
  }

  .contact-info__intro p {
    margin: 0 0 var(--space-4) 0;
  }

  .contact-info__intro p:last-child {
    margin-bottom: 0;
  }

  .contact-info__pre-content {
    margin-bottom: var(--space-12);
    font-size: var(--font-size-base);
  }

  .contact-info__pre-content p {
    margin: 0;
  }

  .contact-info__content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-16);
  }

  .contact-info__details {
    display: flex;
    flex-direction: column;
    gap: var(--space-12);
  }

  .contact-info__item {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    align-items: flex-start;
  }

  .contact-info__icon-wrapper {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }

  .contact-info__icon {
    color: var(--color-primary);
    flex-shrink: 0;
  }

  .contact-info__label {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
  }

  .contact-info__note {
    font-size: var(--font-size-sm);
    color: var(--color-text);
    font-style: italic;
  }

  .contact-info__note p {
    margin: 0;
  }

  .contact-info__buttons {
    display: flex;
    gap: var(--space-4);
    flex-wrap: wrap;
  }

  .contact-info__address {
    font-size: var(--font-size-base);
    color: var(--color-text);
    margin: 0;
    line-height: var(--line-height-normal);
  }

  .contact-info__footer-note {
    margin-top: var(--space-12);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
  }

  .contact-info__footer-note p {
    margin: 0 0 var(--space-4) 0;
  }

  .contact-info__footer-note p:last-child {
    margin-bottom: 0;
  }

  .contact-info__map {
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    height: 100%;
    min-height: 400px;
    position: relative;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.15);
  }

  .contact-info__map-link {
    display: block;
    height: 100%;
    position: relative;
  }

  .contact-info__map img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-base), filter var(--transition-base);
  }

  .contact-info__map-overlay {
    position: absolute;
    bottom: var(--space-4);
    right: var(--space-4);
    pointer-events: none;
    z-index: 2;
  }

  .contact-info__map-text {
    color: white;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-full);
    background-color: rgba(0, 0, 0, 0.7);
    transition: all var(--transition-base);
    display: inline-block;
  }

  .contact-info__map-link:hover img {
    transform: scale(1.05);
    filter: brightness(0.8);
  }

  .contact-info__map-link:hover .contact-info__map-text {
    background-color: rgba(0, 0, 0, 0.9);
    border-color: white;
  }

  @media (max-width: 768px) {
    .contact-info {
      padding: var(--space-16) 0 var(--space-12) 0;
    }

    .contact-info__content {
      grid-template-columns: 1fr;
    }

    .contact-info__map {
      min-height: 300px;
    }

    .contact-info__buttons {
      flex-direction: column;
    }

    .contact-info__buttons .btn {
      width: 100%;
      text-align: center;
    }
  }
</style>