---
interface Props {
  backgroundImage: string;
  cardWidth?: string;
  cardPosition?: 'left' | 'center' | 'right';
  cardBackgroundColor?: string;
  overlayOpacity?: number;
  paddingVertical?: 'small' | 'medium' | 'large';
}

const {
  backgroundImage,
  cardWidth = '600px',
  cardPosition = 'center',
  cardBackgroundColor = '#ffffff',
  overlayOpacity = 0.2,
  paddingVertical = 'large'
} = Astro.props;

const positionMap = {
  'left': 'flex-start',
  'center': 'center',
  'right': 'flex-end',
};

const paddingMap = {
  'small': 'var(--space-16)',
  'medium': 'var(--space-24)',
  'large': 'var(--space-32)',
};
---

<section 
  class="banner"
  style={`
    --card-width: ${cardWidth};
    --card-position: ${positionMap[cardPosition]};
    --card-bg: ${cardBackgroundColor};
    --overlay-opacity: ${overlayOpacity};
    --padding-vertical: ${paddingMap[paddingVertical]};
  `}
>
  <div class="banner__background">
    <img src={backgroundImage} alt="" class="banner__image" />
    <div class="banner__overlay"></div>
  </div>

  <div class="banner__container">
    <div class="banner__card">
      <slot />
    </div>
  </div>
</section>

<style>
  .banner {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .banner__background {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .banner__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .banner__overlay {
    position: absolute;
    inset: 0;
    background-color: #000;
    opacity: var(--overlay-opacity);
    pointer-events: none;
  }

  .banner__container {
    position: relative;
    z-index: 1;
    max-width: var(--container-max);
    margin: 0 auto;
    padding: var(--padding-vertical) var(--container-padding);
    display: flex;
    justify-content: var(--card-position);
  }

  .banner__card {
    max-width: var(--card-width);
    width: 100%;
    background-color: var(--card-bg);
    padding: var(--space-12);
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-xl);
  }

  /* All text/button styling comes from global.css via slot content */
  /* No custom button styles needed here */

  /* responsive */
  @media (max-width: 768px) {
    .banner__card {
      padding: var(--space-8);
    }

    .banner__container {
      padding: var(--space-12) var(--container-padding);
    }
  }
</style>